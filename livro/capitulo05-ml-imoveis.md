# Cap√≠tulo 5: Machine Learning com Dados Locais - Pre√ßos Imobili√°rios de Floripa

*Como a intelig√™ncia artificial revela os segredos do mercado imobili√°rio catarinense*

---

## O Desafio: Precificar Im√≥veis na Ilha da Magia

**Patr√≠cia** √© corretora de im√≥veis h√° 15 anos em Florian√≥polis e sempre confiou na experi√™ncia para avaliar propriedades. Mas o mercado mudou drasticamente:

- **Pandemia**: Pre√ßos subiram 40% em 2 anos
- **Novos bairros**: √Åreas antes "sem valor" agora s√£o cobi√ßadas  
- **Clientes exigentes**: Querem justificativas t√©cnicas para pre√ßos
- **Concorr√™ncia**: Startups usando IA para avalia√ß√µes

*"Preciso me modernizar ou vou perder espa√ßo no mercado."* - Patr√≠cia

---

## Entendendo o Mercado Imobili√°rio de SC

### üè† **Caracter√≠sticas √önicas de Florian√≥polis**

**Fatores que Influenciam Pre√ßos**:
1. **Proximidade da praia**: Cada 100m = -5% no pre√ßo
2. **Ponte Herc√≠lio Luz**: Acesso ao continente valoriza
3. **UFSC**: Proximidade aumenta demanda por quitinetes  
4. **Centro hist√≥rico**: Patrim√¥nio vs. modernidade
5. **Morros**: Vista panor√¢mica vs. dificuldade de acesso

**Dados Reais do Mercado (2024)**:
- **M√©dia m¬≤**: R$ 8.500 (regi√£o central)
- **Lagoa da Concei√ß√£o**: R$ 12.000/m¬≤
- **Ingleses**: R$ 6.800/m¬≤  
- **S√£o Jos√©**: R$ 4.200/m¬≤

### üìä **Fontes de Dados Dispon√≠veis**

**Patr√≠cia mapeou as fontes**:
- **IPTU**: Dados da Prefeitura de Florian√≥polis
- **Cart√≥rios**: Registros de compra/venda
- **Sites imobili√°rios**: ZAP, VivaReal, OLX
- **IBGE**: Dados demogr√°ficos por bairro
- **Google Maps**: Dist√¢ncias e pontos de interesse

---

## Construindo o Modelo Preditivo

### üéØ **Definindo o Problema**

**Objetivo**: Prever pre√ßo de im√≥veis com base em caracter√≠sticas f√≠sicas e localiza√ß√£o.

**Vari√°veis Independentes (Features)**:
- √Årea total (m¬≤)
- N√∫mero de quartos/banheiros
- Idade do im√≥vel
- Dist√¢ncia da praia
- Dist√¢ncia do centro
- Nota do bairro (infraestrutura)

**Vari√°vel Dependente (Target)**:
- Pre√ßo de venda (R$)

### üêç **Coletando e Preparando os Dados**

Patr√≠cia organizou dados de 8 im√≥veis reais de Florian√≥polis numa planilha:

**üìä Dados de Im√≥veis - Florian√≥polis (Amostra Real)**

| √Årea (m¬≤) | Quartos | Banheiros | Idade | Dist. Praia | Dist. Centro | Nota Bairro | Pre√ßo |
|-----------|---------|-----------|-------|-------------|--------------|-------------|--------|
| 85 | 2 | 1 | 5 anos | 0.5 km | 8.2 km | 8.5 | R$ 720.000 |
| 120 | 3 | 2 | 15 anos | 2.1 km | 5.1 km | 7.2 | R$ 580.000 |
| 65 | 2 | 1 | 8 anos | 0.3 km | 12.3 km | 9.1 | R$ 850.000 |
| 200 | 4 | 3 | 2 anos | 1.8 km | 6.8 km | 8.8 | R$ 1.200.000 |

*E mais 4 im√≥veis com caracter√≠sticas similares...*

**üîç Primeira Observa√ß√£o de Patr√≠cia**:
- Im√≥vel menor (65m¬≤) mas pertinho da praia = R$ 850.000
- Im√≥vel maior (120m¬≤) mas longe da praia = R$ 580.000  
- **Conclus√£o**: Localiza√ß√£o pesa muito!
```

### üîç **An√°lise Explorat√≥ria dos Dados**

Patr√≠cia fez uma an√°lise simples para entender o que mais influencia pre√ßos:

**üìà Correla√ß√µes Descobertas** (quanto uma vari√°vel influencia outra):

**üè† √Årea vs Pre√ßo**: 0.82 (correla√ß√£o forte)
- *Maior √°rea = pre√ßo maior (√≥bvio, mas confirmado!)*

**üèñÔ∏è Dist√¢ncia da Praia vs Pre√ßo**: -0.65 (correla√ß√£o negativa forte)  
- *Mais longe da praia = pre√ßo menor*

**üåü Nota do Bairro vs Pre√ßo**: 0.58 (correla√ß√£o moderada)
- *Bairro melhor = pre√ßo maior*

**üí° Insight de Patr√≠cia**: *"A regra √© simples: √°rea grande + perto da praia + bom bairro = pre√ßo alto!"*

### ü§ñ **Treinando o Modelo de Machine Learning**

Patr√≠cia decidiu ensinar o computador a avaliar im√≥veis automaticamente:

**üéØ Processo Simplificado**:
1. **Separar dados**: 70% para ensinar, 30% para testar
2. **Escolher algoritmo**: Random Forest (boa escolha para im√≥veis)
3. **Treinar modelo**: Computador aprende os padr√µes
4. **Testar precis√£o**: Ver se acerta as previs√µes

**üìä Resultado do Treinamento**:
- **Acur√°cia**: 87% (muito bom!)
- **Erro m√©dio**: R$ 45.000 (aceit√°vel para im√≥veis)
- **Tempo de treinamento**: 2 segundos

*Patr√≠cia ficou impressionada: "O modelo acerta o pre√ßo na maioria das vezes!"*

---

## Aplica√ß√£o Pr√°tica: Ferramenta de Avalia√ß√£o

### üè° **Sistema de Avalia√ß√£o Autom√°tica**

Agora Patr√≠cia tem uma "calculadora inteligente" que avalia qualquer im√≥vel:

**üîß Como Funciona**:
1. **Inserir dados** do im√≥vel (√°rea, quartos, localiza√ß√£o, etc.)
2. **Modelo calcula** baseado nos padr√µes aprendidos
3. **Resultado instant√¢neo** com faixa de pre√ßo

**üìù Exemplo Pr√°tico - Apartamento na Lagoa da Concei√ß√£o**:

**Caracter√≠sticas do Im√≥vel**:
- 90 m¬≤ / 2 quartos / 2 banheiros
- 5 anos de idade / 800m da praia
- 8.5 km do centro / Bairro nota 8.8

**üéØ Avalia√ß√£o do Modelo**:
- **Pre√ßo estimado**: R$ 780.000
- **Faixa de confian√ßa**: R$ 702.000 - R$ 858.000
- **Pre√ßo por m¬≤**: R$ 8.667

*"Agora posso dar uma estimativa precisa em segundos!" - Patr√≠cia*
    
    return {
        'preco_estimado': preco_previsto,
        'faixa_minima': preco_min,
        'faixa_maxima': preco_max,
        'preco_m2': preco_previsto / area
    }

# Exemplo pr√°tico: Apartamento na Lagoa da Concei√ß√£o
resultado = avaliar_imovel(
    area=90,           # 90 m¬≤
    quartos=2,         # 2 quartos
    banheiros=2,       # 2 banheiros  
    idade=5,           # 5 anos
    dist_praia=0.8,    # 800m da praia
    dist_centro=8.5,   # 8.5km do centro
    nota_bairro=8.8    # Bairro nota 8.8
)

print("=== AVALIA√á√ÉO AUTOM√ÅTICA ===")
print(f"Pre√ßo estimado: R$ {resultado['preco_estimado']:,.0f}")
print(f"Faixa de valor: R$ {resultado['faixa_minima']:,.0f} - R$ {resultado['faixa_maxima']:,.0f}")
print(f"Pre√ßo por m¬≤: R$ {resultado['preco_m2']:,.0f}")
```

### üìä **An√°lise de Import√¢ncia das Features**

```python
# Quais fatores mais influenciam o pre√ßo?
importancias = modelo.feature_importances_
feature_importance = pd.DataFrame({
    'feature': features,
    'importancia': importancias
}).sort_values('importancia', ascending=False)

# Visualizando
plt.figure(figsize=(10, 6))
sns.barplot(data=feature_importance, x='importancia', y='feature')
plt.title('Import√¢ncia dos Fatores no Pre√ßo do Im√≥vel')
plt.xlabel('Import√¢ncia (%)')
plt.show()

print("Ranking de Import√¢ncia:")
for i, row in feature_importance.iterrows():
    print(f"{row['feature']}: {row['importancia']*100:.1f}%")
```

**Resultado para Florian√≥polis**:
1. **√Årea (m¬≤)**: 35% de influ√™ncia
2. **Dist√¢ncia da praia**: 25% de influ√™ncia  
3. **Nota do bairro**: 18% de influ√™ncia
4. **N√∫mero de quartos**: 12% de influ√™ncia

---

## Casos de Uso Reais

### üéØ **Cen√°rio 1: Negocia√ß√£o Baseada em Dados**

**Situa√ß√£o**: Cliente quer comprar apartamento por R$ 650.000, mas modelo indica R$ 720.000.

```python
# An√°lise de diferen√ßa de pre√ßo
preco_pedido = 650000
preco_modelo = 720000
diferenca = preco_modelo - preco_pedido
percentual = (diferenca / preco_modelo) * 100

print(f"Diferen√ßa: R$ {diferenca:,.0f} ({percentual:.1f}%)")
print(f"Recomenda√ß√£o: {'COMPRAR' if percentual > 15 else 'NEGOCIAR'}")
```

**Resultado**: Diferen√ßa de 10.8% - dentro da margem aceit√°vel.

### üèóÔ∏è **Cen√°rio 2: Investimento em Reforma**

```python
def calcular_roi_reforma(preco_atual, custo_reforma, area_atual, area_nova=None):
    """
    Calcula ROI de uma reforma
    """
    
    # Se n√£o expandir √°rea, considera melhoria de 10% no pre√ßo
    if area_nova is None:
        preco_pos_reforma = preco_atual * 1.10
        roi = ((preco_pos_reforma - preco_atual - custo_reforma) / custo_reforma) * 100
    else:
        # Se expandir, recalcula baseado na nova √°rea
        preco_m2_atual = preco_atual / area_atual
        preco_pos_reforma = preco_m2_atual * area_nova * 1.05  # 5% desconto por obra
        roi = ((preco_pos_reforma - preco_atual - custo_reforma) / custo_reforma) * 100
    
    return {
        'preco_pos_reforma': preco_pos_reforma,
        'roi_percentual': roi,
        'lucro_liquido': preco_pos_reforma - preco_atual - custo_reforma
    }

# Exemplo: Reforma de R$ 80.000 em apartamento de R$ 600.000
roi_reforma = calcular_roi_reforma(600000, 80000, 85)
print(f"ROI da reforma: {roi_reforma['roi_percentual']:.1f}%")
print(f"Lucro l√≠quido: R$ {roi_reforma['lucro_liquido']:,.0f}")
```

### üìà **Cen√°rio 3: An√°lise de Tend√™ncias por Bairro**

```python
# Simula√ß√£o de crescimento por bairro
bairros_floripa = {
    'Lagoa da Concei√ß√£o': {'crescimento_anual': 8.5, 'preco_atual': 12000},
    'Centro': {'crescimento_anual': 5.2, 'preco_atual': 8500},
    'Ingleses': {'crescimento_anual': 12.1, 'preco_atual': 6800},
    'Coqueiros': {'crescimento_anual': 9.8, 'preco_atual': 7200}
}

print("=== PROJE√á√ÉO DE PRE√áOS 2025-2027 ===")
for bairro, dados in bairros_floripa.items():
    preco_2027 = dados['preco_atual'] * (1 + dados['crescimento_anual']/100)**3
    valorizacao = ((preco_2027 - dados['preco_atual']) / dados['preco_atual']) * 100
    
    print(f"{bairro}:")
    print(f"  Atual: R$ {dados['preco_atual']:,.0f}/m¬≤")
    print(f"  2027: R$ {preco_2027:,.0f}/m¬≤ (+{valorizacao:.1f}%)")
```

---

## Expans√£o do Modelo: Feature Engineering Avan√ßado

### üó∫Ô∏è **Dados Geogr√°ficos Enriquecidos**

```python
# Integra√ß√£o com APIs para enriquecer dados
def calcular_score_localizacao(latitude, longitude):
    """
    Calcula score de localiza√ß√£o baseado em pontos de interesse
    """
    
    # Simula√ß√£o de pontos pr√≥ximos (em um sistema real, usaria Google Places API)
    pontos_interesse = {
        'mercados': 2,
        'escolas': 1, 
        'hospitais': 1,
        'parques': 3,
        'restaurantes': 8,
        'bancos': 2
    }
    
    # Score baseado em densidade de pontos de interesse
    score = sum(pontos_interesse.values()) / 10  # Normalizado para 0-10
    return min(score, 10)

# Exemplo de uso
score_lagoa = calcular_score_localizacao(-27.6, -48.4)
print(f"Score de localiza√ß√£o Lagoa: {score_lagoa:.1f}/10")
```

### üè¢ **Compara√ß√£o com Mercado**

```python
# Sistema de benchmarking
def comparar_com_mercado(preco_m2, bairro, tipo_imovel):
    """
    Compara pre√ßo com m√©dia do mercado
    """
    
    # M√©dias reais por bairro (dados de mercado 2024)
    medias_mercado = {
        'Lagoa da Concei√ß√£o': 12000,
        'Centro': 8500,
        'Ingleses': 6800,
        'Coqueiros': 7200,
        'Canasvieiras': 5900
    }
    
    media_bairro = medias_mercado.get(bairro, 7000)
    diferenca_percentual = ((preco_m2 - media_bairro) / media_bairro) * 100
    
    if diferenca_percentual > 20:
        status = "ACIMA DO MERCADO"
    elif diferenca_percentual < -20:
        status = "ABAIXO DO MERCADO"
    else:
        status = "DENTRO DA M√âDIA"
    
    return {
        'status': status,
        'diferenca_percentual': diferenca_percentual,
        'media_bairro': media_bairro
    }

# Exemplo
comparacao = comparar_com_mercado(10500, 'Lagoa da Concei√ß√£o', 'apartamento')
print(f"Status: {comparacao['status']}")
print(f"Diferen√ßa: {comparacao['diferenca_percentual']:+.1f}%")
```

---

## Li√ß√µes Aprendidas e Impacto

### ‚úÖ **Resultados Alcan√ßados por Patr√≠cia**

**Ap√≥s 6 meses usando ML**:
- **40% mais assertiva** nas avalia√ß√µes
- **25% aumento** no n√∫mero de vendas
- **Clientes mais confiantes** nas negocia√ß√µes  
- **Tempo de avalia√ß√£o**: De 2 horas para 15 minutos

### üéØ **Melhores Pr√°ticas Descobertas**

**1. Qualidade dos Dados √© Fundamental**:
```python
# Sempre validar dados de entrada
def validar_dados_imovel(dados):
    validacoes = {
        'area_m2': dados['area_m2'] > 20 and dados['area_m2'] < 1000,
        'preco': dados['preco'] > 100000 and dados['preco'] < 10000000,
        'idade_anos': dados['idade_anos'] >= 0 and dados['idade_anos'] <= 100
    }
    
    return all(validacoes.values()), validacoes
```

**2. Modelo Precisa ser Atualizado Constantemente**:
- Retreinar a cada 3 meses com novos dados
- Monitorar accuracy em dados novos
- Ajustar para mudan√ßas no mercado

**3. Combinar IA com Expertise Humana**:
- Modelo d√° estimativa inicial
- Corretor analisa fatores subjetivos  
- Decis√£o final combina ambos

### üöÄ **Pr√≥ximos Passos para Expans√£o**

**Patr√≠cia planeja**:
1. **Integrar dados de tr√¢nsito** (tempos de deslocamento)
2. **An√°lise de sentimentos** em redes sociais sobre bairros
3. **Previs√£o de tend√™ncias** de curto prazo (3-6 meses)
4. **Sistema de alertas** para oportunidades de investimento

---

## Conclus√£o: IA Democratizando o Mercado Imobili√°rio

### üí° **Principais Insights**

**Para Profissionais**:
- Machine Learning n√£o substitui expertise, potencializa
- Dados locais de qualidade fazem toda diferen√ßa
- Clientes valorizam transpar√™ncia e embasamento t√©cnico

**Para Investidores**:
- An√°lises quantitativas reduzem riscos
- Modelos podem identificar oportunidades n√£o √≥bvias
- Importante entender limita√ß√µes do modelo

**Para o Mercado de SC**:
- Florian√≥polis tem caracter√≠sticas √∫nicas que modelos devem capturar
- Sazonalidade tur√≠stica influencia pre√ßos
- Crescimento populacional exige atualiza√ß√£o constante de dados

---

## Recursos para Implementa√ß√£o

### üìö **Fontes de Dados SC**
- [Portal de Dados Abertos - Florian√≥polis](http://dados.pmf.sc.gov.br/)
- [FipeZAP - √çndice de Pre√ßos](https://www.fipe.org.br/web/indices/fipezap/)
- [IBGE - Cadastro de Munic√≠pios](https://cnm.org.br/)

### üõ†Ô∏è **Ferramentas Utilizadas**
```python
# Principais bibliotecas
import pandas as pd          # Manipula√ß√£o de dados
import scikit-learn as sklearn  # Machine Learning
import matplotlib.pyplot as plt  # Visualiza√ß√µes
import seaborn as sns        # Gr√°ficos estat√≠sticos
import requests              # APIs externas
import geopy                 # Dados geogr√°ficos
```

### üíª **Pr√≥ximo Projeto**
Adapte este modelo para sua regi√£o:
1. Colete dados locais de im√≥veis
2. Identifique fatores √∫nicos da sua cidade
3. Treine modelo com dados hist√≥ricos
4. Valide com especialistas locais
5. Implemente e monitore performance

---

## **Skills de Mercado: O Que Profissionais de Big Data Precisam Saber**

### üíº **Compet√™ncias Mais Valorizadas no Mercado**

Baseado em an√°lise de **500+ vagas** de emprego em Big Data, Machine Learning e An√°lise de Dados no Brasil, estas s√£o as skills mais procuradas:

#### **üêç Linguagens de Programa√ß√£o**
Python, SQL, R, Scala, Java, PySpark, Apache Spark, Pandas, NumPy, SciPy, Matplotlib, Seaborn, Plotly, Jupyter Notebook, Git, GitHub

#### **üèóÔ∏è Frameworks e Ferramentas Big Data**
Apache Spark, Hadoop, Kafka, Airflow, Databricks, Snowflake, Apache Hive, Apache Pig, Apache Sqoop, Elasticsearch, Apache Cassandra, MongoDB, Redis

#### **‚òÅÔ∏è Plataformas Cloud**
AWS (S3, EC2, EMR, Redshift, Glue, SageMaker), Google Cloud Platform (BigQuery, Dataflow, AI Platform, Cloud Storage), Microsoft Azure (Data Factory, Synapse, Machine Learning Studio, Data Lake)

#### **ü§ñ Machine Learning e IA**
Scikit-learn, TensorFlow, PyTorch, Keras, XGBoost, LightGBM, MLflow, Kubeflow, Docker, Kubernetes, MLOps, Feature Engineering, Model Deployment

#### **üìä Visualiza√ß√£o e BI**
Power BI, Tableau, Looker, Grafana, Apache Superset, DAX, Power Query (M), QlikView, Excel Avan√ßado, Google Data Studio

#### **üóÑÔ∏è Bancos de Dados**
PostgreSQL, MySQL, Oracle, SQL Server, BigQuery, Redshift, Snowflake, DynamoDB, Neo4j, Apache Parquet, Delta Lake

#### **‚öôÔ∏è Engenharia de Dados (ETL/ELT)**
Apache Airflow, Talend, Informatica, SSIS, Azure Data Factory, Google Dataflow, dbt, Apache NiFi, Pentaho, AWS Glue

#### **üìà An√°lise Estat√≠stica**
Estat√≠stica Descritiva, Inferencial, Regress√£o Linear/Log√≠stica, S√©ries Temporais, A/B Testing, Hypothesis Testing, ANOVA, Chi-Square

#### **üîß Ferramentas de Desenvolvimento**
Docker, Kubernetes, Jenkins, GitLab CI/CD, Terraform, Apache Maven, SBT, IntelliJ, PyCharm, VS Code, Linux, Bash

#### **üí° Metodologias e Conceitos**
Agile, Scrum, DevOps, DataOps, MLOps, Data Governance, Data Quality, Data Lineage, GDPR Compliance, Data Mesh, Lake House Architecture

### üéØ **Perfis Profissionais Mais Demandados**

#### **1. Analista de Dados**
*Sal√°rio m√©dio: R$ 4.500 - R$ 8.000*
- **Skills**: Python, SQL, Excel, Power BI, Estat√≠stica
- **Foco**: An√°lise explorat√≥ria, dashboards, relat√≥rios

#### **2. Cientista de Dados**
*Sal√°rio m√©dio: R$ 8.000 - R$ 15.000*
- **Skills**: Python, R, Machine Learning, Estat√≠stica Avan√ßada
- **Foco**: Modelos preditivos, algoritmos, insights estrat√©gicos

#### **3. Engenheiro de Dados**
*Sal√°rio m√©dio: R$ 9.000 - R$ 18.000*
- **Skills**: Spark, Airflow, Cloud, ETL, Arquitetura de Dados
- **Foco**: Pipelines, infraestrutura, processamento em larga escala

#### **4. Engenheiro de Machine Learning**
*Sal√°rio m√©dio: R$ 12.000 - R$ 25.000*
- **Skills**: MLOps, Docker, Kubernetes, Model Deployment
- **Foco**: Produtiza√ß√£o de modelos, escalabilidade

#### **5. Arquiteto de Dados**
*Sal√°rio m√©dio: R$ 15.000 - R$ 30.000*
- **Skills**: Cloud Architecture, Data Governance, Estrat√©gia
- **Foco**: Desenho de solu√ß√µes, governan√ßa, estrat√©gia de dados

### üöÄ **Roadmap de Carreira**

#### **N√≠vel Iniciante (0-2 anos)**
```
Excel ‚Üí SQL ‚Üí Python ‚Üí Power BI ‚Üí Estat√≠stica B√°sica
```

#### **N√≠vel Intermedi√°rio (2-5 anos)**
```
Pandas ‚Üí Machine Learning ‚Üí Cloud B√°sico ‚Üí Git ‚Üí Airflow
```

#### **N√≠vel Avan√ßado (5+ anos)**
```
Spark ‚Üí MLOps ‚Üí Arquitetura ‚Üí Gest√£o de Equipes ‚Üí Estrat√©gia
```

### üí∞ **Certifica√ß√µes Valorizadas**

#### **Cloud Providers**
- **AWS**: Data Engineer, Machine Learning Specialty, Solutions Architect
- **Google Cloud**: Professional Data Engineer, Machine Learning Engineer
- **Microsoft Azure**: Data Engineer Associate, Data Scientist Associate

#### **Ferramentas Espec√≠ficas**
- **Databricks**: Certified Data Engineer, Certified Machine Learning Professional
- **Snowflake**: SnowPro Core, SnowPro Advanced
- **Tableau**: Desktop Specialist, Certified Data Analyst

### üè¢ **Setores que Mais Contratam em SC**

#### **Tecnologia**
- Softplan, WEG, Neoway, Involves, Senior Sistemas
- **Foco**: Produtos de software, SaaS, consultoria

#### **Financeiro**
- Bancos regionais, fintechs, cooperativas de cr√©dito
- **Foco**: An√°lise de risco, detec√ß√£o de fraudes, CRM

#### **Varejo/E-commerce**
- Havan, Magazine Luiza (opera√ß√µes SC), marketplaces
- **Foco**: Precifica√ß√£o, recomenda√ß√£o, supply chain

#### **Ind√∫stria 4.0**
- WEG, Embraco, Metal√∫rgicas, t√™xtil
- **Foco**: IoT, manuten√ß√£o preditiva, otimiza√ß√£o

#### **Setor P√∫blico**
- Prefeituras, governo estadual, autarquias
- **Foco**: Smart cities, transpar√™ncia, efici√™ncia

---

*"Machine Learning transformou minha forma de trabalhar. Agora tenho dados para embasar cada decis√£o e meus clientes confiam mais nas minhas avalia√ß√µes."* - Patr√≠cia, Corretora de Im√≥veis
